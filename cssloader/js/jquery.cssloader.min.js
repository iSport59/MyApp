/*
 *	GetFile v1.0 - 2014-10-15
 *	jQuery Css Loader
 *	By Jose Carlos Rodriguez
 *	(c) 2014 Syscover S.L. - http://www.syscover.com/
 *	All rights reserved
 */
"use strict";(function(e){var t={options:{urlPlugin:".",theme:"bubbles",spinnerColor:"#333",delay:250,useLayer:true,layerColor:"#ffffff",isImage:false},properties:{spinner:null,spinnerPosY:null,loaded:false},callback:null,init:function(t,n,r){this.options=e.extend({},this.options,t||{});e.ajax({async:false,cache:false,dataType:"html",context:this,type:"POST",url:this.options.urlPlugin+"/cssloader/themes/"+this.options.theme+"/elements.php",data:this.options,success:function(t){e("body").prepend(t);this.properties.spinner=e("#loading-spinner");if(this.options.isImage){var n=this.properties.spinner.find("img");e(n).attr("src",this.options.urlPlugin+"/cssloader/themes/"+this.options.theme+"/"+e(n).attr("src"))}var r=!!navigator.userAgent.match(/Trident.*rv[ :]*10\./);var i=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./);if(r||i){var s=e(window).height()*.4;this.properties.spinner.css("top",s+"px")}this.properties.spinnerPosY=parseInt(this.properties.spinner.css("top"),10)},error:function(e){}});this.callback=n;if(r){e("#loading-spinner").css("top",this.properties.spinnerPosY+e(window).scrollTop()+"px");var i=this;e(window).scroll(function(t){e("#loading-spinner").css("top",i.properties.spinnerPosY+e(window).scrollTop()+"px")});e(window).on("load",e.proxy(this.loaded,this));var i=this;setTimeout(function(){if(document.readyState==="complete"&&i.properties.loaded==false){i.loaded()}},1e3)}else{if(this.callback!=null){this.callback()}}return this},loaded:function(){this.properties.spinner.fadeOut(this.options.delay+200);e("#pre-cssloader").delay(this.options.delay).fadeOut("slow");setTimeout(function(){e("body").css({overflow:"visible"});e(window).off("scroll")},this.options.delay);this.properties.loaded=true;if(this.callback!=null){this.callback()}},show:function(t,n){this.options=e.extend({},this.options,t||{});if(this.options.useLayer){if(e("#pre-cssloader").length==0){e("body").prepend('<div id="pre-cssloader" style="display: none"></div>')}e("#pre-cssloader").css("background-color",this.options.layerColor);e("#pre-cssloader").fadeIn()}e("#loading-spinner").css("top",this.properties.spinnerPosY+e(window).scrollTop()+"px");e("#loading-spinner").show();var r=this;e(window).scroll(function(t){e("#loading-spinner").css("top",r.properties.spinnerPosY+e(window).scrollTop()+"px")});this.callback=n;if(this.callback!=null){this.callback()}},hide:function(t){if(this.options.useLayer){e("#pre-cssloader").delay(this.options.delay).fadeOut("slow")}this.properties.spinner.fadeOut(this.options.delay+200);var n=this;setTimeout(function(){e("#loading-spinner").css("top",n.properties.spinnerPosY)},this.options.delay+200);this.callback=t;if(this.callback!=null){this.callback()}}};if(typeof Object.create!=="function"){Object.create=function(e){function t(){}t.prototype=e;return new t}}e.cssLoader=function(n,r){if(!e.data(document,"cssLoader")){return e.data(document,"cssLoader",Object.create(t).init(n,r,true))}};e.cssLoader.show=function(n,r){if(!e.data(document,"cssLoader")){e.cssLoader=e.data(document,"cssLoader",Object.create(t).init(n,r,false))}e.data(document,"cssLoader").show(n,r)};e.cssLoader.hide=function(t){e.data(document,"cssLoader").hide(t)}})(jQuery)